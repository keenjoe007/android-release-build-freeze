[debug] [2018-06-15T01:27:48.636Z] ----------------------------------------------------------------------
[debug] [2018-06-15T01:27:48.638Z] Command:       /usr/local/Cellar/node/10.1.0/bin/node /usr/local/bin/firebase deploy --debug
[debug] [2018-06-15T01:27:48.638Z] CLI Version:   3.18.6
[debug] [2018-06-15T01:27:48.639Z] Platform:      darwin
[debug] [2018-06-15T01:27:48.639Z] Node Version:  v10.1.0
[debug] [2018-06-15T01:27:48.639Z] Time:          Fri Jun 15 2018 10:27:48 GMT+0900 (JST)
[debug] [2018-06-15T01:27:48.639Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-06-15T01:27:48.649Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-06-15T01:27:48.649Z] > authorizing via signed-in user
[debug] [2018-06-15T01:27:48.650Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/soysauce-b5364  
  
 Fri Jun 15 2018 10:27:48 GMT+0900 (JST)
[debug] [2018-06-15T01:27:49.955Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:27:49.957Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/soysauce-b5364/tokens  
  
 Fri Jun 15 2018 10:27:49 GMT+0900 (JST)
[debug] [2018-06-15T01:27:51.259Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'soysauce-b5364'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[error] 
[error] Error: functions predeploy error: Command terminated with non-zero exit code1
[debug] [2018-06-15T01:28:28.254Z] ----------------------------------------------------------------------
[debug] [2018-06-15T01:28:28.257Z] Command:       /usr/local/Cellar/node/10.1.0/bin/node /usr/local/bin/firebase deploy --debug
[debug] [2018-06-15T01:28:28.257Z] CLI Version:   3.18.6
[debug] [2018-06-15T01:28:28.257Z] Platform:      darwin
[debug] [2018-06-15T01:28:28.257Z] Node Version:  v10.1.0
[debug] [2018-06-15T01:28:28.258Z] Time:          Fri Jun 15 2018 10:28:28 GMT+0900 (JST)
[debug] [2018-06-15T01:28:28.258Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-06-15T01:28:28.268Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-06-15T01:28:28.268Z] > authorizing via signed-in user
[debug] [2018-06-15T01:28:28.270Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/soysauce-b5364  
  
 Fri Jun 15 2018 10:28:28 GMT+0900 (JST)
[debug] [2018-06-15T01:28:29.096Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:28:29.097Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/soysauce-b5364/tokens  
  
 Fri Jun 15 2018 10:28:29 GMT+0900 (JST)
[debug] [2018-06-15T01:28:29.893Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'soysauce-b5364'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] ✔  functions: Finished running predeploy script.
[debug] [2018-06-15T01:28:33.291Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase serve --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "~5.12.1",
    "firebase-functions": "^1.0.3"
  },
  "devDependencies": {
    "eslint": "^4.12.0",
    "eslint-plugin-promise": "^3.6.0"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-06-15T01:28:33.292Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/soysauce-b5364?view=CONSUMER_VIEW  
  
 Fri Jun 15 2018 10:28:33 GMT+0900 (JST)
[debug] [2018-06-15T01:28:33.292Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/soysauce-b5364?view=CONSUMER_VIEW  
  
 Fri Jun 15 2018 10:28:33 GMT+0900 (JST)
[debug] [2018-06-15T01:28:34.497Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:28:34.504Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-06-15T01:28:34.505Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/soysauce-b5364  
  
 Fri Jun 15 2018 10:28:34 GMT+0900 (JST)
[debug] [2018-06-15T01:28:35.465Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:28:35.466Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/505701453151:getServerAppConfig  
  
 Fri Jun 15 2018 10:28:35 GMT+0900 (JST)
[debug] [2018-06-15T01:28:36.367Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2018-06-15T01:28:36.368Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/soysauce-b5364/configs  
  
 Fri Jun 15 2018 10:28:36 GMT+0900 (JST)
[debug] [2018-06-15T01:28:36.876Z] <<< HTTP RESPONSE 200
[error] 
[error] Error: Error occurred while parsing your function triggers.

TypeError: functions.firestore.document(...).onUpdate(...).then is not a function
    at Object.<anonymous> (/Users/sasaya_h/Desktop/react/SoySauce_true/functions/index.js:18:4)
    at Module._compile (internal/modules/cjs/loader.js:678:30)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:689:10)
    at Module.load (internal/modules/cjs/loader.js:589:32)
    at tryModuleLoad (internal/modules/cjs/loader.js:528:12)
    at Function.Module._load (internal/modules/cjs/loader.js:520:3)
    at Module.require (internal/modules/cjs/loader.js:626:17)
    at require (internal/modules/cjs/helpers.js:20:18)
    at /usr/local/lib/node_modules/firebase-tools/lib/triggerParser.js:21:11
    at Object.<anonymous> (/usr/local/lib/node_modules/firebase-tools/lib/triggerParser.js:75:3)
[debug] [2018-06-15T01:29:36.229Z] ----------------------------------------------------------------------
[debug] [2018-06-15T01:29:36.232Z] Command:       /usr/local/Cellar/node/10.1.0/bin/node /usr/local/bin/firebase deploy --debug
[debug] [2018-06-15T01:29:36.232Z] CLI Version:   3.18.6
[debug] [2018-06-15T01:29:36.232Z] Platform:      darwin
[debug] [2018-06-15T01:29:36.232Z] Node Version:  v10.1.0
[debug] [2018-06-15T01:29:36.233Z] Time:          Fri Jun 15 2018 10:29:36 GMT+0900 (JST)
[debug] [2018-06-15T01:29:36.233Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-06-15T01:29:36.243Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-06-15T01:29:36.244Z] > authorizing via signed-in user
[debug] [2018-06-15T01:29:36.245Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/soysauce-b5364  
  
 Fri Jun 15 2018 10:29:36 GMT+0900 (JST)
[debug] [2018-06-15T01:29:37.283Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:29:37.284Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/soysauce-b5364/tokens  
  
 Fri Jun 15 2018 10:29:37 GMT+0900 (JST)
[debug] [2018-06-15T01:29:38.052Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'soysauce-b5364'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] ✔  functions: Finished running predeploy script.
[debug] [2018-06-15T01:29:41.833Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase serve --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "~5.12.1",
    "firebase-functions": "^1.0.3"
  },
  "devDependencies": {
    "eslint": "^4.12.0",
    "eslint-plugin-promise": "^3.6.0"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-06-15T01:29:41.834Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/soysauce-b5364?view=CONSUMER_VIEW  
  
 Fri Jun 15 2018 10:29:41 GMT+0900 (JST)
[debug] [2018-06-15T01:29:41.834Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/soysauce-b5364?view=CONSUMER_VIEW  
  
 Fri Jun 15 2018 10:29:41 GMT+0900 (JST)
[debug] [2018-06-15T01:29:43.015Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:29:43.022Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-06-15T01:29:43.022Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/soysauce-b5364  
  
 Fri Jun 15 2018 10:29:43 GMT+0900 (JST)
[debug] [2018-06-15T01:29:43.952Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:29:43.952Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/505701453151:getServerAppConfig  
  
 Fri Jun 15 2018 10:29:43 GMT+0900 (JST)
[debug] [2018-06-15T01:29:44.587Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2018-06-15T01:29:44.589Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/soysauce-b5364/configs  
  
 Fri Jun 15 2018 10:29:44 GMT+0900 (JST)
[debug] [2018-06-15T01:29:45.038Z] <<< HTTP RESPONSE 200
[error] 
[error] Error: Error occurred while parsing your function triggers.

TypeError: functions.firestore.document(...).onUpdate(...).then is not a function
    at Object.<anonymous> (/Users/sasaya_h/Desktop/react/SoySauce_true/functions/index.js:18:4)
    at Module._compile (internal/modules/cjs/loader.js:678:30)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:689:10)
    at Module.load (internal/modules/cjs/loader.js:589:32)
    at tryModuleLoad (internal/modules/cjs/loader.js:528:12)
    at Function.Module._load (internal/modules/cjs/loader.js:520:3)
    at Module.require (internal/modules/cjs/loader.js:626:17)
    at require (internal/modules/cjs/helpers.js:20:18)
    at /usr/local/lib/node_modules/firebase-tools/lib/triggerParser.js:21:11
    at Object.<anonymous> (/usr/local/lib/node_modules/firebase-tools/lib/triggerParser.js:75:3)
[debug] [2018-06-15T01:30:29.394Z] ----------------------------------------------------------------------
[debug] [2018-06-15T01:30:29.396Z] Command:       /usr/local/Cellar/node/10.1.0/bin/node /usr/local/bin/firebase deploy --debug
[debug] [2018-06-15T01:30:29.396Z] CLI Version:   3.18.6
[debug] [2018-06-15T01:30:29.396Z] Platform:      darwin
[debug] [2018-06-15T01:30:29.397Z] Node Version:  v10.1.0
[debug] [2018-06-15T01:30:29.397Z] Time:          Fri Jun 15 2018 10:30:29 GMT+0900 (JST)
[debug] [2018-06-15T01:30:29.397Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-06-15T01:30:29.407Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-06-15T01:30:29.407Z] > authorizing via signed-in user
[debug] [2018-06-15T01:30:29.409Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/soysauce-b5364  
  
 Fri Jun 15 2018 10:30:29 GMT+0900 (JST)
[debug] [2018-06-15T01:30:30.114Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:30:30.115Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/soysauce-b5364/tokens  
  
 Fri Jun 15 2018 10:30:30 GMT+0900 (JST)
[debug] [2018-06-15T01:30:30.807Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'soysauce-b5364'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[error] 
[error] Error: functions predeploy error: Command terminated with non-zero exit code1
[debug] [2018-06-15T01:30:55.491Z] ----------------------------------------------------------------------
[debug] [2018-06-15T01:30:55.493Z] Command:       /usr/local/Cellar/node/10.1.0/bin/node /usr/local/bin/firebase deploy --debug
[debug] [2018-06-15T01:30:55.494Z] CLI Version:   3.18.6
[debug] [2018-06-15T01:30:55.494Z] Platform:      darwin
[debug] [2018-06-15T01:30:55.494Z] Node Version:  v10.1.0
[debug] [2018-06-15T01:30:55.494Z] Time:          Fri Jun 15 2018 10:30:55 GMT+0900 (JST)
[debug] [2018-06-15T01:30:55.494Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-06-15T01:30:55.503Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-06-15T01:30:55.503Z] > authorizing via signed-in user
[debug] [2018-06-15T01:30:55.505Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/soysauce-b5364  
  
 Fri Jun 15 2018 10:30:55 GMT+0900 (JST)
[debug] [2018-06-15T01:30:56.720Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:30:56.721Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/soysauce-b5364/tokens  
  
 Fri Jun 15 2018 10:30:56 GMT+0900 (JST)
[debug] [2018-06-15T01:30:57.624Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'soysauce-b5364'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] ✔  functions: Finished running predeploy script.
[debug] [2018-06-15T01:31:00.841Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase serve --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "~5.12.1",
    "firebase-functions": "^1.0.3"
  },
  "devDependencies": {
    "eslint": "^4.12.0",
    "eslint-plugin-promise": "^3.6.0"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-06-15T01:31:00.842Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/soysauce-b5364?view=CONSUMER_VIEW  
  
 Fri Jun 15 2018 10:31:00 GMT+0900 (JST)
[debug] [2018-06-15T01:31:00.843Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/soysauce-b5364?view=CONSUMER_VIEW  
  
 Fri Jun 15 2018 10:31:00 GMT+0900 (JST)
[debug] [2018-06-15T01:31:02.162Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:31:02.168Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-06-15T01:31:02.169Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/soysauce-b5364  
  
 Fri Jun 15 2018 10:31:02 GMT+0900 (JST)
[debug] [2018-06-15T01:31:03.011Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:31:03.012Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/505701453151:getServerAppConfig  
  
 Fri Jun 15 2018 10:31:03 GMT+0900 (JST)
[debug] [2018-06-15T01:31:03.745Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2018-06-15T01:31:03.746Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/soysauce-b5364/configs  
  
 Fri Jun 15 2018 10:31:03 GMT+0900 (JST)
[debug] [2018-06-15T01:31:04.126Z] <<< HTTP RESPONSE 200
[error] 
[error] Error: Error occurred while parsing your function triggers.

TypeError: functions.firestore.document(...).onUpdate(...).then is not a function
    at Object.<anonymous> (/Users/sasaya_h/Desktop/react/SoySauce_true/functions/index.js:18:4)
    at Module._compile (internal/modules/cjs/loader.js:678:30)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:689:10)
    at Module.load (internal/modules/cjs/loader.js:589:32)
    at tryModuleLoad (internal/modules/cjs/loader.js:528:12)
    at Function.Module._load (internal/modules/cjs/loader.js:520:3)
    at Module.require (internal/modules/cjs/loader.js:626:17)
    at require (internal/modules/cjs/helpers.js:20:18)
    at /usr/local/lib/node_modules/firebase-tools/lib/triggerParser.js:21:11
    at Object.<anonymous> (/usr/local/lib/node_modules/firebase-tools/lib/triggerParser.js:75:3)
[debug] [2018-06-15T01:32:32.643Z] ----------------------------------------------------------------------
[debug] [2018-06-15T01:32:32.645Z] Command:       /usr/local/Cellar/node/10.1.0/bin/node /usr/local/bin/firebase deploy --debug
[debug] [2018-06-15T01:32:32.645Z] CLI Version:   3.18.6
[debug] [2018-06-15T01:32:32.646Z] Platform:      darwin
[debug] [2018-06-15T01:32:32.646Z] Node Version:  v10.1.0
[debug] [2018-06-15T01:32:32.646Z] Time:          Fri Jun 15 2018 10:32:32 GMT+0900 (JST)
[debug] [2018-06-15T01:32:32.646Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-06-15T01:32:32.655Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-06-15T01:32:32.655Z] > authorizing via signed-in user
[debug] [2018-06-15T01:32:32.656Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/soysauce-b5364  
  
 Fri Jun 15 2018 10:32:32 GMT+0900 (JST)
[debug] [2018-06-15T01:32:33.832Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:32:33.833Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/soysauce-b5364/tokens  
  
 Fri Jun 15 2018 10:32:33 GMT+0900 (JST)
[debug] [2018-06-15T01:32:34.438Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'soysauce-b5364'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] ✔  functions: Finished running predeploy script.
[debug] [2018-06-15T01:32:38.006Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase serve --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "~5.12.1",
    "firebase-functions": "^1.0.3"
  },
  "devDependencies": {
    "eslint": "^4.12.0",
    "eslint-plugin-promise": "^3.6.0"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-06-15T01:32:38.007Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/soysauce-b5364?view=CONSUMER_VIEW  
  
 Fri Jun 15 2018 10:32:38 GMT+0900 (JST)
[debug] [2018-06-15T01:32:38.007Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/soysauce-b5364?view=CONSUMER_VIEW  
  
 Fri Jun 15 2018 10:32:38 GMT+0900 (JST)
[debug] [2018-06-15T01:32:39.466Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:32:39.477Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-06-15T01:32:39.477Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/soysauce-b5364  
  
 Fri Jun 15 2018 10:32:39 GMT+0900 (JST)
[debug] [2018-06-15T01:32:40.416Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:32:40.417Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/505701453151:getServerAppConfig  
  
 Fri Jun 15 2018 10:32:40 GMT+0900 (JST)
[debug] [2018-06-15T01:32:41.203Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2018-06-15T01:32:41.205Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/soysauce-b5364/configs  
  
 Fri Jun 15 2018 10:32:41 GMT+0900 (JST)
[debug] [2018-06-15T01:32:41.587Z] <<< HTTP RESPONSE 200
[error] 
[error] Error: Error occurred while parsing your function triggers.

TypeError: functions.firestore.document(...).onUpdate.then is not a function
    at Object.<anonymous> (/Users/sasaya_h/Desktop/react/SoySauce_true/functions/index.js:7:4)
    at Module._compile (internal/modules/cjs/loader.js:678:30)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:689:10)
    at Module.load (internal/modules/cjs/loader.js:589:32)
    at tryModuleLoad (internal/modules/cjs/loader.js:528:12)
    at Function.Module._load (internal/modules/cjs/loader.js:520:3)
    at Module.require (internal/modules/cjs/loader.js:626:17)
    at require (internal/modules/cjs/helpers.js:20:18)
    at /usr/local/lib/node_modules/firebase-tools/lib/triggerParser.js:21:11
    at Object.<anonymous> (/usr/local/lib/node_modules/firebase-tools/lib/triggerParser.js:75:3)
[debug] [2018-06-15T01:35:45.095Z] ----------------------------------------------------------------------
[debug] [2018-06-15T01:35:45.097Z] Command:       /usr/local/Cellar/node/10.1.0/bin/node /usr/local/bin/firebase deploy --debug
[debug] [2018-06-15T01:35:45.098Z] CLI Version:   3.18.6
[debug] [2018-06-15T01:35:45.098Z] Platform:      darwin
[debug] [2018-06-15T01:35:45.098Z] Node Version:  v10.1.0
[debug] [2018-06-15T01:35:45.098Z] Time:          Fri Jun 15 2018 10:35:45 GMT+0900 (JST)
[debug] [2018-06-15T01:35:45.098Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-06-15T01:35:45.109Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-06-15T01:35:45.109Z] > authorizing via signed-in user
[debug] [2018-06-15T01:35:45.111Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/soysauce-b5364  
  
 Fri Jun 15 2018 10:35:45 GMT+0900 (JST)
[debug] [2018-06-15T01:35:46.360Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:35:46.361Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/soysauce-b5364/tokens  
  
 Fri Jun 15 2018 10:35:46 GMT+0900 (JST)
[debug] [2018-06-15T01:35:47.323Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'soysauce-b5364'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[error] 
[error] Error: functions predeploy error: Command terminated with non-zero exit code1
[debug] [2018-06-15T01:36:13.418Z] ----------------------------------------------------------------------
[debug] [2018-06-15T01:36:13.421Z] Command:       /usr/local/Cellar/node/10.1.0/bin/node /usr/local/bin/firebase deploy --debug
[debug] [2018-06-15T01:36:13.421Z] CLI Version:   3.18.6
[debug] [2018-06-15T01:36:13.421Z] Platform:      darwin
[debug] [2018-06-15T01:36:13.421Z] Node Version:  v10.1.0
[debug] [2018-06-15T01:36:13.422Z] Time:          Fri Jun 15 2018 10:36:13 GMT+0900 (JST)
[debug] [2018-06-15T01:36:13.422Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-06-15T01:36:13.431Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-06-15T01:36:13.432Z] > authorizing via signed-in user
[debug] [2018-06-15T01:36:13.433Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/soysauce-b5364  
  
 Fri Jun 15 2018 10:36:13 GMT+0900 (JST)
[debug] [2018-06-15T01:36:14.338Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:14.339Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/soysauce-b5364/tokens  
  
 Fri Jun 15 2018 10:36:14 GMT+0900 (JST)
[debug] [2018-06-15T01:36:15.146Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'soysauce-b5364'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] ✔  functions: Finished running predeploy script.
[debug] [2018-06-15T01:36:18.226Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase serve --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "dependencies": {
    "firebase-admin": "~5.12.1",
    "firebase-functions": "^1.0.3"
  },
  "devDependencies": {
    "eslint": "^4.12.0",
    "eslint-plugin-promise": "^3.6.0"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-06-15T01:36:18.226Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/soysauce-b5364?view=CONSUMER_VIEW  
  
 Fri Jun 15 2018 10:36:18 GMT+0900 (JST)
[debug] [2018-06-15T01:36:18.227Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/soysauce-b5364?view=CONSUMER_VIEW  
  
 Fri Jun 15 2018 10:36:18 GMT+0900 (JST)
[debug] [2018-06-15T01:36:19.422Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-06-15T01:36:19.459Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:19.460Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/soysauce-b5364  
  
 Fri Jun 15 2018 10:36:19 GMT+0900 (JST)
[debug] [2018-06-15T01:36:20.332Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:20.333Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/505701453151:getServerAppConfig  
  
 Fri Jun 15 2018 10:36:20 GMT+0900 (JST)
[debug] [2018-06-15T01:36:21.109Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2018-06-15T01:36:21.111Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/soysauce-b5364/configs  
  
 Fri Jun 15 2018 10:36:21 GMT+0900 (JST)
[debug] [2018-06-15T01:36:21.774Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (50.89 KB) for uploading
[debug] [2018-06-15T01:36:21.933Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/soysauce-b5364/locations/us-central1/functions:generateUploadUrl  
  
 Fri Jun 15 2018 10:36:21 GMT+0900 (JST)
[debug] [2018-06-15T01:36:22.430Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:22.431Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-7852a8ce-4d62-4731-bf85-cd99eb96397e/16713294-3f85-4617-839c-929e9001723e.zip?GoogleAccessId=service-505701453151@gcf-admin-robot.iam.gserviceaccount.com&Expires=1529028382&Signature=ygjDKIuKgg48fBGv4Jhh7mA0t6mlStd7WNao%2BDKRlnN6l9xfpdjFvRI91lTXDywPYypsaJ0HBe8VrNN3UXz%2FsfHLaMMc4t48I5Hkgk9qk0UgMpG1IZ1lmSretS2g49iY%2FsxU6gUjT2jshJRBGFuI9YUx0QwBbWlCfeurufaqYG6XWz4y3nvjFCsxhEMiq5KGrmTlIpNv3jtvufSEQZQMyevOqkMqYurrP96gLHasUmUxW73UGW6RYErAJfsDVjjfuec0aurFjYOsFfzE0s8vm5nOyuUAJ4TodhvHwe8Eijxe%2BATJlYTk8UmIRtHPTLyMmEjYuFH51J2%2F8q49i3xJdw%3D%3D  
 ReadStream {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 65536,
     buffer: BufferList { length: 1 },
     length: 52107,
     pipes: null,
     pipesCount: 0,
     flowing: null,
     ended: true,
     endEmitted: false,
     reading: false,
     sync: false,
     needReadable: false,
     emittedReadable: true,
     readableListening: false,
     resumeScheduled: false,
     emitClose: false,
     destroyed: false,
     defaultEncoding: 'utf8',
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: true,
  domain: null,
  _events: { end: [Function] },
  _eventsCount: 1,
  _maxListeners: undefined,
  path: '/var/folders/yv/788ksfts0m32h3jsgrc3nv7c0000gp/T/firebase-functions-23330fDZZxoUXhzuc.zip',
  fd: 20,
  flags: 'r',
  mode: 438,
  start: undefined,
  end: Infinity,
  autoClose: true,
  pos: undefined,
  bytesRead: 52107,
  closed: false } 
 Fri Jun 15 2018 10:36:22 GMT+0900 (JST)
[debug] [2018-06-15T01:36:22.949Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[debug] [2018-06-15T01:36:22.950Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/soysauce-b5364/locations/us-central1/functions  
  
 Fri Jun 15 2018 10:36:22 GMT+0900 (JST)
[debug] [2018-06-15T01:36:23.480Z] <<< HTTP RESPONSE 200
[info] i  functions: updating function sendChatNotification...
[debug] [2018-06-15T01:36:23.482Z] Trigger is:  {"eventTrigger":{"resource":"projects/soysauce-b5364/databases/(default)/documents/users/{userUid}","eventType":"providers/cloud.firestore/eventTypes/document.update","service":"firestore.googleapis.com"}}
[debug] [2018-06-15T01:36:23.482Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/soysauce-b5364/locations/us-central1/functions/sendChatNotification 
query params: {"updateMask":"sourceUploadUrl,name,labels,eventTrigger.resource,eventTrigger.eventType,eventTrigger.service"} 
 { sourceUploadUrl: 'https://storage.googleapis.com/gcf-upload-us-central1-7852a8ce-4d62-4731-bf85-cd99eb96397e/16713294-3f85-4617-839c-929e9001723e.zip?GoogleAccessId=service-505701453151@gcf-admin-robot.iam.gserviceaccount.com&Expires=1529028382&Signature=ygjDKIuKgg48fBGv4Jhh7mA0t6mlStd7WNao%2BDKRlnN6l9xfpdjFvRI91lTXDywPYypsaJ0HBe8VrNN3UXz%2FsfHLaMMc4t48I5Hkgk9qk0UgMpG1IZ1lmSretS2g49iY%2FsxU6gUjT2jshJRBGFuI9YUx0QwBbWlCfeurufaqYG6XWz4y3nvjFCsxhEMiq5KGrmTlIpNv3jtvufSEQZQMyevOqkMqYurrP96gLHasUmUxW73UGW6RYErAJfsDVjjfuec0aurFjYOsFfzE0s8vm5nOyuUAJ4TodhvHwe8Eijxe%2BATJlYTk8UmIRtHPTLyMmEjYuFH51J2%2F8q49i3xJdw%3D%3D',
  name: 'projects/soysauce-b5364/locations/us-central1/functions/sendChatNotification',
  labels: { 'deployment-tool': 'cli-firebase' },
  eventTrigger: 
   { resource: 'projects/soysauce-b5364/databases/(default)/documents/users/{userUid}',
     eventType: 'providers/cloud.firestore/eventTypes/document.update',
     service: 'firestore.googleapis.com' } } 
 Fri Jun 15 2018 10:36:23 GMT+0900 (JST)
[debug] [2018-06-15T01:36:24.052Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:24.055Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:24 GMT+0900 (JST)
[debug] [2018-06-15T01:36:24.527Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:26.530Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:26 GMT+0900 (JST)
[debug] [2018-06-15T01:36:27.018Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:29.020Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:29 GMT+0900 (JST)
[debug] [2018-06-15T01:36:29.403Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:31.407Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:31 GMT+0900 (JST)
[debug] [2018-06-15T01:36:31.874Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:33.875Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:33 GMT+0900 (JST)
[debug] [2018-06-15T01:36:34.248Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:36.251Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:36 GMT+0900 (JST)
[debug] [2018-06-15T01:36:36.523Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:38.525Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:38 GMT+0900 (JST)
[debug] [2018-06-15T01:36:38.818Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:40.824Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:40 GMT+0900 (JST)
[debug] [2018-06-15T01:36:41.306Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:43.311Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:43 GMT+0900 (JST)
[debug] [2018-06-15T01:36:43.655Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:45.658Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:45 GMT+0900 (JST)
[debug] [2018-06-15T01:36:45.928Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:47.933Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:47 GMT+0900 (JST)
[debug] [2018-06-15T01:36:48.248Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:50.249Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:50 GMT+0900 (JST)
[debug] [2018-06-15T01:36:50.742Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:52.744Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:52 GMT+0900 (JST)
[debug] [2018-06-15T01:36:53.134Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:55.141Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:55 GMT+0900 (JST)
[debug] [2018-06-15T01:36:55.378Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:57.379Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:57 GMT+0900 (JST)
[debug] [2018-06-15T01:36:57.707Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:36:59.710Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:36:59 GMT+0900 (JST)
[debug] [2018-06-15T01:37:00.180Z] <<< HTTP RESPONSE 200
[debug] [2018-06-15T01:37:02.183Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c295c2F1Y2UtYjUzNjQvdXMtY2VudHJhbDEvc2VuZENoYXROb3RpZmljYXRpb24vb295eU1Mcjg0cU0  
  
 Fri Jun 15 2018 10:37:02 GMT+0900 (JST)
[debug] [2018-06-15T01:37:02.562Z] <<< HTTP RESPONSE 200
[info] ✔  functions[sendChatNotification]: Successful update operation. 
[info] 
[info] ✔  Deploy complete!
[info] 
[info] Project Console: https://console.firebase.google.com/project/soysauce-b5364/overview
